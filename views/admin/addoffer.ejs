<%- include ('../admin/layouts/header.ejs')-%>

    <!-- partial -->
    <div class="col-12 mt-5 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title"></h4>
                <!-- <p class="card-description"> Basic form elements </p> -->
                <form class="forms-sample"   action="" method="" >
                    <div class="form-group">
                        <label for="exampleInputName1">Category Name</label>
                        <select name="categoryname" id="categoryname" class="form-control" required>
                            <% for (let i = 0; i < categorydata.length; i++) { %>
                                <option value="<%= categorydata[i].productcategory %>"><%= categorydata[i].productcategory %></option>
                            <% } %>
                        </select>
                    </div>
                    
                    
                    <div class="form-group">
                        <label for="avtivationDate">Starting Date</label>
                        <input type="date" class="form-control" id="startingdate" 
                        name="startingdate"  placeholder="activation date" style="color: white;" required>
                        <p style="color: red;" ></p>
                    </div>
                    <div class="form-group">
                        <label for="avtivationDate">Expiry Date</label>
                        <input type="date" class="form-control" id="expirydate"
                        name="expirydate"  placeholder="activation date" style="color: white;" required>
                        <p style="color: red;" ></p>
                    </div>
                    <div class="form-group">
                        <label for="exampleInputPassword4">Offer percentage</label>
                        <input type="number" class="form-control" id="offerpercentage"
                           name="offerpercentage" placeholder="Discount Amount" name="offerpercentage"  required>
                    </div>
                   
                    <button type="button"  onclick="addcategoryoffer()" class="btn btn-primary mr-2">Submit</button>
                    <button class="btn btn-dark"><a href="/admin/offermanagement">Cancel</a></button>
                </form>
            </div>
        </div>
    </div>
<script>
    function addcategoryoffer(){
        const categoryname = document.getElementById('categoryname').value
        const startingdate = document.getElementById('startingdate').value
        const expirydate = document.getElementById('expirydate').value
         const offerpercentage = document.getElementById('offerpercentage').value
         console.log(categoryname,startingdate,expirydate);
        $.ajax({
            url:'/admin/offerdata',
            method:'post',
            data:JSON.stringify({categoryname,startingdate,expirydate,offerpercentage}),
            contentType:'application/json',
            success:function(response){
                if(response.result==true){
                    alert('Categoryoffer already exist');
                    window.location.href = "/admin/offermanagement"
                }else{
                    window.location.href = "/admin/offermanagement"
                }
            }
        })
    }



</script>
    <%- include ('../admin/layouts/footer.ejs')-%>