

<%- include ('../admin/layouts/header.ejs')-%>
    
        <!-- partial -->
        <div class="main-panel">
          <div class="content-wrapper">
           
            <div class="row">
              
              <div class="col-lg-12  grid-margin stretch-card">
                
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title"> SHOZEY Sales Report</h4>
                    <button id="download" class="btn btn-primary">Report Download</button>
                  <div class="table-responsive" id="table">
                      <table class="table">
                        <thead>
                            <tr>
                                <th>No.</th>
                                <th> Orderid</th>
                                <th>Products-Qty</th>
                                <th>Date</th>
                                <th>Customer</th>
                                <th>TotalAmount</th>
                            </tr>
                            
                            
                            <tr>
                                <% let count = 1%>
                                <% for(let i=0 ;i<orderdata.length; i++){%>
                                    <% let item = orderdata[i].items %>
                                    <% let address = orderdata[i].deliveryDetails %>
                                    <% for(let j=0;j<item.length;j++) {%>
                                        <% let product = item[j].productid %>
                            <td><%= count++%></td>
                            <td><%= orderdata[i]._id %></td>
                            <td><%= item[j].count%></td>
                            <td><%= orderdata[i].purchaseDate.toLocaleDateString('en-US', {
                                year: 'numeric',
                                month: 'short',
                                day: '2-digit'
                              }).replace(/\//g, '-') %></td>
                            <td><%= address.name %></td>
                            <td><%= item[j].total %></td>
                          
                           
                          </tr> 
                          <%}%>
                          <%} %>
                          
                          
                        
                        </thead>
                        <tbody>
                       
                              
                        </tbody>
                      </table>
                    </div>
                  </div>

                </div>


              </div>
              <div class="container " style="max-width: 450px; margin: 0 auto; padding: 0; background-color: #000000; border: 0; border-radius: 5px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); text-align: right;">
                <form id="formdata">
                <div style="display: inline-block;">
                  <input type="date" name="datestart" id="dateInput1" style="width: 100%; padding: 3px; border: 1px solid #ccc; border-radius: 0; height: auto;">
                </div>
                <div style="display: inline-block;">
                  <input type="date"  id="dateInput2" style="width: 100%; padding: 3px; border: 1px solid #ccc; border-radius: 5px; height: auto;">
                </div>
                <button type="submit  " id="sortButton" style="background-color: #007BFF; color: #fff; border: none; border-radius: 5px; padding: 8px 15px; cursor: pointer;">
                  Sort
                </button>
                <ul id="dateList" style="list-style: none; padding: 0;"></ul>
                </form>
              </div>

            
              
              <script>
                const print = document.getElementById('download')
                print.addEventListener('click',()=>{
                  window.print();
                })


//         $(document).ready(() => {
//   $('#formdata').on('submit', (event) => {
//     event.preventDefault();
//     var formData = $(this).serialize();  // Use formData instead of formdata

//     $.ajax({
//       url: '/admin/salessort',
//       method: 'POST',  // Use POST instead of post
//       data: formData,
//       success: function(response) {
//         if (response === true) {  // Use response instead of result
//           $('#table').load('/admin/salessort #table');
//         } else {
//           console.log("Not found");
//         }
//       },
//       error: function() {  // Handle AJAX error
//         console.error("An error occurred.");
//       }
//     });
//   });
// });

document.getElementById('formdata').addEventListener('submit',(e)=>{
  e.preventDefault()
  console.log("hjgvf");
  const datestart = document.getElementById('dateInput1').value
 const dateend = document.getElementById('dateInput2').value
  console.log(datestart);
  console.log(dateend);
  $.ajax({
    url:"/admin/salessort",
    method:'post',
    data:({date1:datestart,date2:dateend}),
    sucess: function(response){
      if(res.true){
        console.log("data");
      }else{
        console.log("notfound");
      }

    }
  })


})

                </script>
       
         <%- include ('../admin/layouts/footer.ejs')-%>



