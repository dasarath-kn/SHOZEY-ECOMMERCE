<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      

      .card-footer-btn {
        display: flex;
        align-items: center;
        border-top-left-radius: 0 !important;
        border-top-right-radius: 0 !important;
      }
      .text-uppercase-bold-sm {
        text-transform: uppercase !important;
        font-weight: 500 !important;
        letter-spacing: 2px !important;
        font-size: 0.85rem !important;
      }
      .hover-lift-light {
        transition: box-shadow 0.25s ease, transform 0.25s ease,
          color 0.25s ease, background-color 0.15s ease-in;
      }
      .justify-content-center {
        justify-content: center !important;
      }
      .btn-group-lg > .btn,
      .btn-lg {
        padding: 0.8rem 1.85rem;
        font-size: 1.1rem;
        border-radius: 0.3rem;
      }
      .btn-dark {
        color: #fff;
        background-color: #1e2e50;
        border-color: #1e2e50;
      }

      .card {
        position: relative;
        display: flex;
        flex-direction: column;
        min-width: 0;
        word-wrap: break-word;
        background-color: #fff;
        background-clip: border-box;
        border: 1px solid rgba(30, 46, 80, 0.09);
        border-radius: 0.25rem;
        box-shadow: 0 20px 27px 0 rgb(0 0 0 / 5%);
      }

      .p-5 {
        padding: 3rem !important;
      }
      .card-body {
        flex: 1 1 auto;
        padding: 1.5rem 1.5rem;
      }

      tbody,
      td,
      tfoot,
      th,
      thead,
      tr {
        border-color: inherit;
        border-style: solid;
        border-width: 0;
      }

      .table td,
      .table th {
        border-bottom: 0;
        border-top: 1px solid #edf2f9;
      }
      .table > :not(caption) > * > * {
        padding: 1rem 1rem;
        background-color: var(--bs-table-bg);
        border-bottom-width: 1px;
        box-shadow: inset 0 0 0 9999px var(--bs-table-accent-bg);
      }
      .px-0 {
        padding-right: 0 !important;
        padding-left: 0 !important;
      }
      .table thead th,
      tbody td,
      tbody th {
        vertical-align: middle;
      }
      tbody,
      td,
      tfoot,
      th,
      thead,
      tr {
        border-color: inherit;
        border-style: solid;
        border-width: 0;
      }

      .mt-5 {
        margin-top: 3rem !important;
      }

      .icon-circle[class*="text-"] [fill]:not([fill="none"]),
      .icon-circle[class*="text-"] svg:not([fill="none"]),
      .svg-icon[class*="text-"] [fill]:not([fill="none"]),
      .svg-icon[class*="text-"] svg:not([fill="none"]) {
        fill: currentColor !important;
      }
      .svg-icon > svg {
        width: 1.45rem;
        height: 1.45rem;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
  </head>

  <body>
    <div style="margin-top: 20px; background: #87cefa;"></div>
    <div class="container mt-6 mb-7">
      <div class="row justify-content-center">
        <div class="col-lg-12 col-xl-7">
          <div class="card">
            
            <div class="card-body p-5">
              <div class="greeting">
                <h2>Hello <%= orderdata[0].deliveryDetails.name %>  ,</h2>
                <p class="fs-sm">
                  Thank you for choosing ResticLens! We are thrilled to inform you about the successful payment of
                  <strong>₹ <%= orderdata[0].totalAmount %></strong> made on
                  <strong><%= orderdata[0].purchaseDate.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: '2-digit' }).replace(/\//g, '-') %></strong>.
                  this is your receipt for your order, please keep it!
                </p>
              </div>

              <div class="border-top border-gray-200 pt-4 mt-4">
                <div class="row">
                  <div class="col-md-6">
                    <div class="text-muted mb-2">Order No.</div>
                    <strong><%= orderdata[0]._id %></strong>
                  </div>
                  <div class="col-md-6 text-md-end">
                    <div class="text-muted mb-2">Payment Method</div>
                    <strong><%= orderdata[0].paymentMethod %></strong>
                  </div>
                </div>
              </div>

              <div class="border-top border-gray-200 mt-4 py-4">
                <div class="row">
                  <div class="col-md-6">
                    <div class="text-muted mb-2">Client</div>
                    <strong> <%= orderdata[0].deliveryDetails.name%> </strong>
                    <p class="fs-sm">
                      <%= orderdata[0].deliveryDetails.address%>, <%= orderdata[0].deliveryDetails.city%>, <%= orderdata[0].deliveryDetails.state %>, <%= orderdata[0].deliveryDetails.pincode%>.
                      <br />
                      <a href="#!" class="text-purple"><%= orderdata[0].deliveryDetails.phonenumber%></a>
                    </p>
                  </div>
                  <div class="col-md-6 text-md-end">
                    <div class="text-muted mb-2">Payment To</div>
                    <strong> Shozey </strong>
                    <p class="fs-sm">
                      123, Sunshine Lane,
                      Palm Grove City,
                      Bangalore 560001,
                      Karnataka, India.
                      <br />
                      <a href="#!" class="text-purple">dasarathkn99@gmail.com </a>
                    </p>
                  </div>
                </div>
              </div>

              <table class="table border-bottom border-gray-200 mt-3">
                <thead>
                  <tr>
                    <th
                      scope="col"
                      class="fs-sm text-dark text-uppercase-bold-sm px-0"
                    >
                      Items
                    </th>
                    <th scope="col"
                      class="fs-sm text-dark text-uppercase-bold-sm text-end px-0"
                    >
                      Quantity
                    </th>
                    <th
                      scope="col"
                      class="fs-sm text-dark text-uppercase-bold-sm text-end px-0"
                    >
                      Price
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <% var productdata =orderdata[0].items %>
                  <tr>
                    <% for(let i=0;i<productdata.length;i++){%>
                        <td class="px-0"><%=productdata[i].productid.productname  %></td>
                        <td class="text-end px-0"><%= productdata[i].count %></td>
                        <td class="text-end px-0">$<%= productdata[i].count*productdata[i].total  %></td>
                  <%} %>
                      </tr>
                 
                </tbody>
              </table>

              <div class="mt-5">
                <div class="d-flex justify-content-end">
                  <p class="text-muted me-3">Subtotal:</p>
                  <span>₹ <%= orderdata[0].totalAmount %></span>
                </div>
                <div class="d-flex justify-content-end">
                  <p class="text-muted me-3">Discount:</p>
                  <span>- ₹<%= orderdata[0].discountamount%></span>
                </div>
                <div class="d-flex justify-content-end mt-3">
                  <h5 class="me-3">Total:</h5>
                  <h5 class="text-success">₹ <%= orderdata[0].totalAmount %></h5>
                  <span id="download" style="margin-left: 10px;" onclick="downloadpdf()"><i class="fa fa-download ml-3" aria-hidden="true"></i>                  </span>
                </div>
              </div>
            </div>
            <a href="#!" class="btn btn-dark btn-lg card-footer-btn justify-content-center text-uppercase-bold-sm hover-lift-light">
              <span class="svg-icon text-white me-2">
                <i class="fa fa-credit-card text-white"></i>
              </span>
              Payment Status: Paid
            </a>
            
          
          </div>
        </div>
      </div>
    </div>
  </body>
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
  />
  <script>
    function pdf(){
      document.getElementById('download').style.display='none';
 setTimeout(() => {
  
   document.getElementById('download').style.display='block';
 }, 1000);
      window.print();


    }
    pdf()

    function downloadpdf(){
      document.getElementById('download').style.display='none';
      setTimeout(() => {
  
  document.getElementById('download').style.display='block';
}, 1000);
      window.print();

    }
  </script>
</html>